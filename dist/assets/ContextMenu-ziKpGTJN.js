import{W as S,X as D,ai as K,d as C,k as I,a9 as N,c as h,f as v,o as u,n as p,g as y,a as $,m as M,p as U,t as W,_ as w,C as f,O as g,P as j,v as q,F as k,w as z,z as b,l as A,aa as J}from"./index-h_7xmTiz.js";const ye=(i,c,t)=>{R(new Blob([i],{type:t}),c)},R=(i,c)=>{const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(i),t.download=c,t.click(),document.body.removeChild(t)},T=(i,c)=>{const t=K(i),s=o=>{o.isTrusted&&t.every(a=>!a.value||!o.composedPath().includes(a.value))&&c(o)};S(()=>window.addEventListener("click",s)),D(()=>window.removeEventListener("click",s))},B=Symbol("ContextMenuStore"),V=["data-testid"],G=C({__name:"ContextMenuButton",props:{class:{},text:{},icon:{},muted:{type:Boolean,default:!1},padIcon:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},testId:{}},emits:["click"],setup(i,{emit:c}){const t=c,s=i,o=I(),a=N(B),d=h(()=>[s.class,o.btn,{[o.muted]:s.muted,[o.highlight]:s.highlight,[o.padIcon]:s.padIcon&&!s.icon}]),l=n=>{a?.close(),t("click",n)};return(n,m)=>(u(),v("li",{class:p(n.$style.item)},[y("button",{"data-testid":n.testId,type:"button",class:p(d.value),onClick:l},[n.icon?(u(),$(U(n.icon),{key:0,class:p(n.$style.icon)},null,8,["class"])):M("",!0),y("span",null,W(n.text),1)],10,V)],2))}}),H="Fc",X="Gc",Q="Hc",Y="Ic",Z="Jc",x="Kc",ee={item:H,btn:X,icon:Q,padIcon:Y,muted:Z,highlight:x},te={$style:ee},se=w(G,[["__cssModules",te]]),oe=C({__name:"ContextMenu",props:{class:{},tooltip:{},tooltipPosition:{},position:{default:"right-end"},options:{},highlight:{},testId:{}},emits:["select"],setup(i,{emit:c}){const t=c,s=i,o=I(),a=f(),d=f(),l=f(!1),n=f("auto");let m;T([d,a],()=>l.value=!1),g([l,a,d],()=>{l.value&&a.value&&d.value&&(m?.destroy(),m=j(a.value,d.value,{placement:s.position,modifiers:[{name:"offset",options:{offset:[10,10]}},{name:"positionTracker",enabled:!0,phase:"afterWrite",fn:({state:e})=>void(n.value=e.placement.split("-")[0])}]}))}),g(()=>s.position,e=>m?.setOptions({placement:e}));const _=h(()=>s.options?.some(e=>e.icon)),O=h(()=>[s.class,o.reference]),F=h(()=>[o.list,{[o[n.value]]:n.value in o}]),L=e=>{t("select",e),l.value=!1},P=()=>requestAnimationFrame(()=>l.value=!l.value);return J(B,{close:()=>requestAnimationFrame(()=>l.value=!1)}),(e,fe)=>{const E=q("tooltip");return u(),v(k,null,[z((u(),v("div",{ref_key:"reference",ref:a,class:p(O.value)},[b(e.$slots,"default",{toggle:P})],2)),[[E,{text:e.tooltip,position:e.tooltipPosition}]]),y("div",{ref_key:"popper",ref:d,class:p([e.$style.popper,{[e.$style.visible]:l.value}])},[y("ul",{class:p(F.value)},[e.$slots.options?b(e.$slots,"options",{key:0}):e.options?(u(!0),v(k,{key:1},A(e.options,r=>(u(),$(se,{key:r.id,testId:`${e.testId}-${r.id}`,padIcon:_.value,text:r.label??r.id,icon:r.icon,muted:r.muted,highlight:r.id===e.highlight,onClick:he=>L(r)},null,8,["testId","padIcon","text","icon","muted","highlight","onClick"]))),128)):M("",!0)],2)],2)],64)}}}),ne="Ia",ae="Ja",le="Ka",ie="La",ce="Ma",re="Na",de="Oa",ue="Pa",pe={reference:ne,popper:ae,visible:le,list:ie,top:ce,bottom:re,left:de,right:ue},me={$style:pe},ge=w(oe,[["__cssModules",me]]);export{se as C,ge as a,R as b,ye as d,T as u};
