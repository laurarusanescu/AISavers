import{C as F,O as Ue,d as P,y as Qe,b as i,c as V,f as A,o as h,n as g,a as L,g as Y,p as ut,t as ue,_ as oe,Q as Ne,R as qe,$ as Ve,m as z,w as ct,h as b,a0 as bt,k as dt,a1 as pt,W as Ze,z as Te,a2 as kt,e as K,a3 as ke,U as ft,x as J,F as Ce,l as ht,u as je,A as Je,i as Se,a4 as $t,a5 as wt,a6 as Ct,a7 as St,a8 as nt,a9 as Et,X as xt,aa as Rt,ab as Mt,H as ot,ac as Dt,K as It,B as Ot,Z as Lt}from"./index-h_7xmTiz.js";import{d as Pt,u as Bt,F as at,f as Ae,B as ce,J as mt,_ as gt,g as At,h as Vt,D as Ft,i as Ut,j as Tt,L as zt,O as Nt,k as qt,I as jt,b as Yt,l as Kt,m as Ht,n as Wt,o as Gt,N as vt,p as Qt,r as Zt,e as Jt,z as Xe,s as Xt,t as es,x as ts,A as ss,E as ns,H as os,K as as,R as is,a as rs,T as ls}from"./Button-BP00bKSb.js";import{u as us,C as $e,a as Ye,d as cs}from"./ContextMenu-ziKpGTJN.js";import{L as ds,C as ps}from"./ComponentTransition-AFw05anb.js";const fs=f=>{const c=F([]),a=new MutationObserver(s=>{c.value=s});return Ue(f,s=>{a.disconnect(),s&&a.observe(s,{subtree:!0,childList:!0})}),c},hs=f=>{const c=F(new DOMRect),a=fs(f),s=Pt(f);return Ue([a,s],()=>{const n=f.value;n&&(n.style.setProperty("position","fixed"),c.value=n.getBoundingClientRect(),n.style.removeProperty("position"))}),c},ms=({accept:f,multiple:c}={})=>{const a=document.createElement("input");return document.body.appendChild(a),a.type="file",a.style.display="none",f&&(a.accept=f),c&&(a.multiple=!0),new Promise((s,o)=>{a.onchange=()=>{const n=Array.from(a.files??[]);document.body.removeChild(a),n.length?s(c?n:n[0]):o()},a.click()})},gs=P({__name:"Alert",props:{class:{},text:{},type:{}},setup(f){Qe(n=>({"1248d184":i(o).text.base,"52bce62a":i(o).color.base}));const c=f,a={error:["danger",at],success:["success",Ae],warning:["warning",at]},s=V(()=>c.class),o=Bt(()=>a[c.type][0]);return(n,l)=>(h(),A("p",{class:g([n.$style.alert,s.value])},[(h(),L(ut(a[n.type][1]),{class:g(n.$style.icon)},null,8,["class"])),Y("span",null,ue(n.text),1)],2))}}),vs="lc",ys="mc",_s={alert:vs,icon:ys},bs={$style:_s},Fe=oe(gs,[["__cssModules",bs]]),ks=["for"],$s={key:0},ws=["id","data-testid"],Cs=P({__name:"CheckBox",props:Ne({label:{},subLabel:{},testId:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const c=qe(f,"modelValue"),a=Ve();return(s,o)=>(h(),A("div",{class:g(s.$style.field)},[Y("label",{class:g(s.$style.label),for:i(a)},[Y("span",null,ue(s.label),1),s.subLabel?(h(),A("small",$s,ue(s.subLabel),1)):z("",!0)],10,ks),Y("div",{class:g(s.$style.box)},[ct(Y("input",{id:i(a),"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),"data-testid":s.testId,class:g(s.$style.input),type:"checkbox"},null,10,ws),[[bt,c.value]]),b(i(Ae),{size:"16",class:g(s.$style.icon)},null,8,["class"])],2)],2))}}),Ss="Da",Es="Ea",xs="Fa",Rs="Ga",Ms="Ha",Ds={field:Ss,label:Es,box:xs,input:Rs,icon:Ms},Is={$style:Ds},We=oe(Cs,[["__cssModules",Is]]),Os=P({__name:"Dialog",props:{open:{type:Boolean},title:{},contentClass:{}},emits:["close"],setup(f,{emit:c}){const a=c,s=f,o=F(),n=F(),l=F(!1),d=dt(),p=V(()=>[d.dialog,{[d.open]:s.open}]);us(o,()=>l.value&&a("close"));const r=()=>{s.open||n.value?.close()};return Ue([pt(s,"open"),n],()=>{s.open?(n.value?.showModal(),requestAnimationFrame(()=>l.value=!0)):(l.value=!1,requestAnimationFrame(()=>n.value?.close()))},{immediate:!0}),Ze(()=>{n.value&&(n.value.remove(),document.getElementById("app")?.append(n.value))}),(m,_)=>(h(),A("dialog",{ref_key:"dialog",ref:n,class:g(p.value),onTransitionend:r},[Y("div",{class:g(m.$style.backdrop)},null,2),Y("div",{ref_key:"content",ref:o,class:g([m.$style.content,m.contentClass])},[m.title?(h(),A("h3",{key:0,class:g(m.$style.title)},ue(m.title),3)):z("",!0),Te(m.$slots,"default")],2)],34))}}),Ls="ya",Ps="za",Bs="Aa",As="Ba",Vs="Ca",Fs={dialog:Ls,backdrop:Ps,content:Bs,open:As,title:Vs},Us={$style:Fs},Oe=oe(Os,[["__cssModules",Us]]),Ts=P({__name:"Form",props:{submitLabel:{}},emits:["submit"],setup(f,{emit:c}){const a=c,s=o=>{a("submit"),o.preventDefault()};return(o,n)=>(h(),A("form",{class:g(o.$style.fields),action:"#",onSubmit:s},[Te(o.$slots,"default"),b(ce,{class:g(o.$style.btn),text:o.submitLabel,type:"submit"},null,8,["class","text"])],34))}}),zs="dc",Ns="ec",qs={fields:zs,btn:Ns},js={$style:qs},et=oe(Ts,[["__cssModules",js]]),Ys=["for"],Ks=["id","name","minlength","maxlength","required","type","placeholder"],Hs=P({__name:"TextField",props:Ne({type:{default:"text"},name:{},minLength:{},maxLength:{},required:{type:Boolean},label:{},placeholder:{},showPasswordStrength:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){Qe(_=>({"10da0ac4":r.value,"1308078a":m.value}));const c=qe(f,"modelValue"),a=F(!1),s=F(),o=F(""),n=Ve(),l=_=>_?Math.log2(new Set(_).size)*_.length:0,d=()=>{o.value=s.value?.validationMessage??""},p=V(()=>l(c.value)),r=V(()=>Math.min(1,p.value/80)),m=V(()=>p.value<25?"var(--c-danger)":p.value<60?"var(--c-warning)":"var(--c-success)");return(_,R)=>(h(),A("div",{class:g(_.$style.field)},[Y("label",{class:g(_.$style.label),for:i(n)},ue(_.label),11,Ys),Y("div",{class:g(_.$style.inputBox)},[ct(Y("input",{id:i(n),ref_key:"input",ref:s,"onUpdate:modelValue":R[0]||(R[0]=M=>c.value=M),name:_.name,minlength:_.minLength,maxlength:_.maxLength,required:_.required,class:g(_.$style.input),type:_.type==="password"?a.value?"text":"password":"text",placeholder:_.placeholder,onValid:d,onInvalid:d},null,42,Ks),[[kt,c.value]]),_.type==="password"?(h(),L(ce,{key:0,textual:"",icon:a.value?i(mt):i(gt),onClick:R[1]||(R[1]=M=>a.value=!a.value)},null,8,["icon"])):z("",!0)],2),o.value?(h(),A("p",{key:0,class:g(_.$style.error)},ue(o.value),3)):z("",!0),_.showPasswordStrength&&_.type==="password"?(h(),A("div",{key:1,class:g(_.$style.passwordStrength)},[Y("div",{class:g(_.$style.bar)},null,2)],2)):z("",!0)],2))}}),Ws="xc",Gs="yc",Qs="zc",Zs="Ac",Js="Bc",Xs="Cc",en="Dc",tn="Ec",sn={field:Ws,inputBox:Gs,input:Qs,icon:Zs,label:Js,error:Xs,passwordStrength:en,bar:tn},nn={$style:sn},Ie=oe(Hs,[["__cssModules",nn]]),on=P({__name:"CreateUserDialog",props:{open:{type:Boolean}},emits:["close"],setup(f,{emit:c}){const a=c,{t:s}=K(),{createUser:o}=ke(),n=F("idle"),l=ft({name:"",password:"",admin:!1}),d=()=>{n.value!=="loading"&&(n.value="loading",o(l).then(()=>{l.name="",l.password="",n.value="idle",a("close")}).catch(p=>{n.value=p instanceof Response&&p.status===409?"conflict":"errored"}))};return(p,r)=>(h(),L(Oe,{title:i(s)("navigation.admin.createUser"),open:p.open,onClose:r[3]||(r[3]=m=>a("close"))},{default:J(()=>[b(et,{submitLabel:i(s)("navigation.admin.createUser"),onSubmit:d},{default:J(()=>[b(Ie,{modelValue:l.name,"onUpdate:modelValue":r[0]||(r[0]=m=>l.name=m),minLength:3,maxLength:32,required:"",label:i(s)("navigation.admin.username")},null,8,["modelValue","label"]),b(Ie,{modelValue:l.password,"onUpdate:modelValue":r[1]||(r[1]=m=>l.password=m),required:"",minLength:8,maxLength:64,label:i(s)("navigation.admin.password"),type:"password",showPasswordStrength:""},null,8,["modelValue","label"]),b(We,{modelValue:l.admin,"onUpdate:modelValue":r[2]||(r[2]=m=>l.admin=m),label:i(s)("navigation.admin.admin")},null,8,["modelValue","label"]),n.value==="errored"?(h(),L(Fe,{key:0,text:i(s)("navigation.admin.error"),type:"error"},null,8,["text"])):z("",!0),n.value==="conflict"?(h(),L(Fe,{key:1,text:i(s)("navigation.admin.conflict"),type:"error"},null,8,["text"])):z("",!0)]),_:1},8,["submitLabel"])]),_:1},8,["title","open"]))}}),an="fc",rn="gc",ln="hc",un={fields:an,title:rn,btn:ln},cn={$style:un},dn=oe(on,[["__cssModules",cn]]),pn=P({__name:"CreateUserButton",setup(f){const{t:c}=K(),a=F(!1);return(s,o)=>(h(),A(Ce,null,[b($e,{icon:i(At),text:i(c)("navigation.admin.createUser"),onClick:o[0]||(o[0]=n=>a.value=!0)},null,8,["icon","text"]),b(dn,{open:a.value,onClose:o[1]||(o[1]=n=>a.value=!1)},null,8,["open"])],64))}}),fn=P({__name:"ManageUsersModal",props:{open:{type:Boolean}},emits:["close"],setup(f,{emit:c}){const a=c,s=f,{t:o}=K(),{user:n,getAllUsers:l,updateUser:d,deleteUser:p}=ke(),r=F([]),m=async(M,N)=>{await d(M.name,{...M,admin:N}),await R()},_=async M=>{window.confirm(o("navigation.admin.deleteUserConfirmation",{name:M.name}))&&(await p(M.name),await R())},R=async()=>r.value=await l();return Ue([n,pt(s,"open")],([M])=>M?.admin&&void R(),{immediate:!0}),(M,N)=>(h(),L(Oe,{title:i(o)("navigation.admin.manageUsers"),open:M.open,onClose:N[0]||(N[0]=W=>a("close"))},{default:J(()=>[r.value.length?(h(),A("ul",{key:0,class:g(M.$style.list)},[(h(!0),A(Ce,null,ht(r.value,W=>(h(),A("li",{key:W.name,class:g(M.$style.item)},[Y("span",{class:g(M.$style.name)},ue(W.name),3),b(ce,{color:W.admin?"success":"dimmed",textual:"",icon:i(Vt),onClick:fe=>m(W,!W.admin)},null,8,["color","icon","onClick"]),b(ce,{color:"danger",textual:"",icon:i(Ft),onClick:fe=>_(W)},null,8,["icon","onClick"])],2))),128))],2)):(h(),A("p",{key:1,class:g(M.$style.placeholder)},ue(i(o)("navigation.admin.noUsersFound")),3))]),_:1},8,["title","open"]))}}),hn="nc",mn="oc",gn="pc",vn="qc",yn="rc",_n={list:hn,item:mn,name:gn,actions:vn,placeholder:yn},bn={$style:_n},kn=oe(fn,[["__cssModules",bn]]),$n=P({__name:"ManageUsersButton",setup(f){const{t:c}=K(),a=F(!1);return(s,o)=>(h(),A(Ce,null,[b($e,{text:i(c)("navigation.admin.manageUsers"),icon:i(Ut),onClick:o[0]||(o[0]=n=>a.value=!a.value)},null,8,["text","icon"]),b(kn,{open:a.value,onClose:o[1]||(o[1]=n=>a.value=!1)},null,8,["open"])],64))}}),wn=P({__name:"AdminButton",props:{class:{}},setup(f){const c=f,{t:a}=K(),{user:s}=ke(),o=je(),n=V(()=>c.class);return(l,d)=>(h(),L(Ye,{tooltip:i(a)("navigation.admin.settings"),position:i(o)==="mobile"?"top":"right-end",tooltipPosition:"right",class:g(n.value)},{default:J(({toggle:p})=>[b(ce,{icon:i(Tt),textual:"",color:"dimmed",onClick:p},null,8,["icon","onClick"])]),options:J(()=>[b(pn),i(s)?.admin?(h(),L($n,{key:0})):z("",!0)]),_:1},8,["tooltip","position","class"]))}}),Cn=P({__name:"LoginDialog",props:{open:{type:Boolean}},emits:["close"],setup(f,{emit:c}){const a=c,{t:s}=K(),{login:o}=ke(),n=F(""),l=F(""),d=F("idle"),p=async()=>{d.value!=="loading"&&(d.value="loading",await o(n.value,l.value)?(n.value="",l.value="",d.value="idle",a("close")):d.value="errored")};return(r,m)=>(h(),L(Oe,{open:r.open,title:i(s)("navigation.auth.welcomeBack"),onClose:m[2]||(m[2]=_=>a("close"))},{default:J(()=>[b(et,{submitLabel:i(s)("navigation.auth.signIn"),onSubmit:p},{default:J(()=>[b(Ie,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=_=>n.value=_),required:"",label:i(s)("navigation.auth.username"),type:"text",name:"username"},null,8,["modelValue","label"]),b(Ie,{modelValue:l.value,"onUpdate:modelValue":m[1]||(m[1]=_=>l.value=_),required:"",label:i(s)("navigation.auth.password"),type:"password",name:"password"},null,8,["modelValue","label"]),d.value==="errored"?(h(),L(Fe,{key:0,text:i(s)("navigation.auth.loginFailed"),type:"error"},null,8,["text"])):z("",!0)]),_:1},8,["submitLabel"])]),_:1},8,["open","title"]))}}),Sn=P({__name:"CloudButton",props:{class:{}},setup(f){const c=f,{status:a,logout:s}=ke(),o=F(!1),n=V(()=>c.class),l=V(()=>{switch(a.value){case"syncing":case"retrying":return qt;case"idle":return Nt;case"error":return zt}return jt}),d=V(()=>{switch(a.value){case"authenticated":return"success";case"loading":return"warning";case"idle":case"error":return"danger";case"syncing":return"primary"}return"danger"}),p=()=>{a.value==="idle"?o.value=!0:s()};return(r,m)=>(h(),A(Ce,null,[b(ce,{class:g(n.value),textual:"",color:d.value,icon:l.value,onClick:p},null,8,["class","color","icon"]),b(Cn,{open:o.value,onClose:m[0]||(m[0]=_=>o.value=!1)},null,8,["open"])],64))}}),En=["for"],xn=["id","data-testid","onClick"],Rn=P({__name:"Select",props:Ne({label:{},options:{},testId:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const c=qe(f,"modelValue"),a=f,s=Ve(),o=V(()=>a.options?.find(n=>n.id===c.value)?.label??"Select...");return(n,l)=>(h(),A("div",{class:g(n.$style.select)},[Y("label",{for:i(s),class:g(n.$style.label)},ue(n.label),11,En),b(Ye,{testId:n.testId,tooltipPosition:"bottom",options:n.options,position:"bottom-start",onSelect:l[0]||(l[0]=d=>c.value=d.id)},{default:J(({toggle:d})=>[Y("button",{id:i(s),"data-testid":n.testId,class:g(n.$style.btn),type:"button",onClick:d},ue(o.value),11,xn)]),_:1},8,["testId","options"])],2))}}),Mn="va",Dn="wa",In="xa",On={select:Mn,label:Dn,btn:In},Ln={$style:On},He=oe(Rn,[["__cssModules",Ln]]),Pn=["USD","EUR","JPY","GBP","CZK","AUD","CAD","CHF","CNY","DKK","SEK","NZD","MXN","SGD","HKD","NOK","KRW","TRY","INR","RUB","BRL","ZAR","HUF","PLN","CRC","IDR"],Bn=P({__name:"SettingsDialog",props:{open:{type:Boolean}},emits:["close"],setup(f,{emit:c}){const a=c,{t:s,locale:o}=K(),{setMonthOffset:n,setCarryOver:l,setAnimations:d,state:p}=Je(),{changeCurrency:r,changeLocale:m,state:_}=Se(),R=Yt(),M=V(()=>{const ee=new Intl.DisplayNames(wt,{type:"language"});return $t.map(U=>({id:U,icon:_.locale===U?Ae:void 0,label:ee.of(U)}))}),N=V(()=>Pn.map(ee=>({id:ee,icon:_.currency===ee?Ae:void 0,label:`${fe(o.value,ee,"name")} (${fe(o.value,ee)})`}))),W=V(()=>R.value.map((ee,U)=>({id:U,label:ee,icon:p.general.monthOffset===U?Ae:void 0}))),fe=(ee,U,pe)=>{const Re=new Intl.NumberFormat(ee,{style:"currency",currencyDisplay:pe,currency:U}).formatToParts(0).find(Le=>Le.type==="currency")?.value;return Re&&Re[0].toUpperCase()+Re.slice(1)};return(ee,U)=>(h(),L(Oe,{open:ee.open,title:i(s)("navigation.settings.settings"),onClose:U[3]||(U[3]=pe=>a("close"))},{default:J(()=>[Y("div",{class:g(ee.$style.settingsDialog)},[b(He,{modelValue:i(_).locale,testId:"change-locale",label:i(s)("navigation.settings.language"),options:M.value,"onUpdate:modelValue":U[0]||(U[0]=pe=>i(m)(pe))},null,8,["modelValue","label","options"]),b(He,{modelValue:i(_).currency,testId:"change-currency",label:i(s)("navigation.settings.currency"),options:N.value,"onUpdate:modelValue":U[1]||(U[1]=pe=>i(r)(pe))},null,8,["modelValue","label","options"]),b(He,{modelValue:i(p).general.monthOffset,testId:"change-month-offset",label:i(s)("navigation.settings.firstMonthOfYear"),options:W.value,"onUpdate:modelValue":U[2]||(U[2]=pe=>i(n)(pe))},null,8,["modelValue","label","options"]),b(We,{label:i(s)("navigation.settings.showAnimationsAndTransitions"),modelValue:i(p).appearance.animations,"onUpdate:modelValue":i(d)},null,8,["label","modelValue","onUpdate:modelValue"]),b(We,{label:i(s)("navigation.settings.carryOverNetSavings"),subLabel:i(s)("navigation.settings.carryOverNetSavingsInfo"),modelValue:i(p).general.carryOver,testId:"carry-over-net-savings","onUpdate:modelValue":i(l)},null,8,["label","subLabel","modelValue","onUpdate:modelValue"])],2)]),_:1},8,["open","title"]))}}),An="G_",Vn={settingsDialog:An},Fn={$style:Vn},Un=oe(Bn,[["__cssModules",Fn]]),Tn=P({__name:"SettingsButton",props:{class:{}},setup(f){const c=f,{t:a}=K(),s=F(!1),o=V(()=>c.class);return(n,l)=>(h(),A(Ce,null,[b(ce,{tooltip:i(a)("navigation.settings.settings"),class:g(o.value),textual:"",color:"dimmed",testId:"settings",icon:i(Kt),onClick:l[0]||(l[0]=d=>s.value=!0)},null,8,["tooltip","class","icon"]),b(Un,{open:s.value,onClose:l[1]||(l[1]=d=>s.value=!1)},null,8,["open"])],64))}}),zn=P({__name:"ThemeButton",props:{class:{}},setup(f){const c=f,{state:a,setTheme:s}=Je(),{t:o}=K(),n=Ct();let l=!1;const d=V(()=>a.appearance.theme==="light"?Ht:Wt),p=V(()=>c.class),r=St(),m=()=>{const R=r?.vnode.el?.getBoundingClientRect(),M=R.left+R.width/2,N=R.top+R.height/2;return`${M}px ${N}px`},_=()=>{if(l)return;l=!0;const R=a.appearance.theme,M=R==="dark";s(M?"light":"dark");const N=m(),W=n.cloneNode(!0);W.classList.add(R),document.body[M?"prepend":"append"](W);const[fe,ee]=M?[0,150]:[150,0],U=M?n:W;n.style.setProperty("--transitions","0"),W.style.setProperty("--transitions","0"),U.style.setProperty("clip-path",`circle(${fe}% at ${N})`),U.style.setProperty("transition","all 0.75s ease-in-out"),U.addEventListener("transitionend",pe=>{pe.target===U&&(n.style.removeProperty("--transitions"),W.style.removeProperty("--transitions"),U.style.removeProperty("transition"),U.style.removeProperty("clip-path"),W.remove(),l=!1)}),requestAnimationFrame(()=>{U.style.setProperty("clip-path",`circle(${ee}% at ${N})`)})};return(R,M)=>(h(),L(ce,{tooltip:i(o)("navigation.theme.change"),class:g(p.value),icon:d.value,textual:"",onClick:_},null,8,["tooltip","class","icon"]))}}),Nn=P({__name:"ChangePasswordDialog",props:{open:{type:Boolean}},emits:["close"],setup(f,{emit:c}){const a=c,{t:s}=K(),{updatePassword:o}=ke(),n=F(""),l=F(""),d=F("idle"),p=async()=>{d.value!=="loading"&&(d.value="loading",o({currentPassword:n.value,newPassword:l.value}).then(()=>{n.value="",l.value="",d.value="idle",a("close")}).catch(r=>{d.value=r instanceof Response&&r.status===401?"invalid-password":"errored"}))};return(r,m)=>(h(),L(Oe,{title:i(s)("navigation.tools.changePassword.change"),open:r.open,onClose:m[2]||(m[2]=_=>a("close"))},{default:J(()=>[b(et,{submitLabel:i(s)("navigation.tools.changePassword.change"),onSubmit:p},{default:J(()=>[b(Ie,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=_=>n.value=_),required:"",label:i(s)("navigation.tools.changePassword.current"),type:"password"},null,8,["modelValue","label"]),b(Ie,{modelValue:l.value,"onUpdate:modelValue":m[1]||(m[1]=_=>l.value=_),minLength:8,maxLength:64,required:"",label:i(s)("navigation.tools.changePassword.new"),type:"password",showPasswordStrength:""},null,8,["modelValue","label"]),d.value==="invalid-password"?(h(),L(Fe,{key:0,text:i(s)("navigation.tools.changePassword.invalid"),type:"error"},null,8,["text"])):z("",!0),d.value==="errored"?(h(),L(Fe,{key:1,text:i(s)("navigation.tools.changePassword.unknownError"),type:"error"},null,8,["text"])):z("",!0)]),_:1},8,["submitLabel"])]),_:1},8,["title","open"]))}}),qn="ic",jn="jc",Yn="kc",Kn={fields:qn,title:jn,btn:Yn},Hn={$style:Kn},Wn=oe(Nn,[["__cssModules",Hn]]),Gn=P({__name:"ChangePasswordButton",setup(f){const{t:c}=K(),a=F(!1);return(s,o)=>(h(),A(Ce,null,[b($e,{icon:i(Gt),text:i(c)("navigation.tools.changePassword.change"),onClick:o[0]||(o[0]=n=>a.value=!0)},null,8,["icon","text"]),b(Wn,{open:a.value,onClose:o[1]||(o[1]=n=>a.value=!1)},null,8,["open"])],64))}}),Qn=P({__name:"CopyButton",setup(f){const{clipboard:c,state:a}=Se(),{t:s}=K();return(o,n)=>(h(),L($e,{text:i(s)("navigation.tools.copyPaste.copy",{year:i(a).activeYear}),testId:"copy-data",icon:i(vt),onClick:i(c).copy},null,8,["text","icon","onClick"]))}}),Zn=P({__name:"PasteButton",setup(f){const{clipboard:c,state:a}=Se(),{t:s}=K(),o=V(()=>c.data.value?.year),n=V(()=>a.activeYear),l=()=>{window.confirm(s("navigation.tools.copyPaste.confirm",{from:o.value,to:n.value}))&&c.paste()};return(d,p)=>i(c).data.value?(h(),L($e,{key:0,text:i(s)("navigation.tools.copyPaste.paste",{from:o.value,to:n.value}),icon:i(vt),testId:"paste-data",onClick:l},null,8,["text","icon"])):z("",!0)}}),Jn=P({__name:"DeleteYearButton",setup(f){const{state:c,shiftYears:a}=Se(),{t:s}=K(),o=()=>{window.confirm(s("navigation.tools.deleteYear.confirm",{year:c.activeYear}))&&a()};return(n,l)=>i(c).activeYear===i(c).years[0].year&&i(c).years.length>1?(h(),L($e,{key:0,text:i(s)("navigation.tools.deleteYear.delete",{year:i(c).activeYear}),icon:i(Qt),onClick:o},null,8,["text","icon"])):z("",!0)}}),Xn=P({__name:"ExportButton",setup(f){const{serialize:c}=Se(),{t:a}=K(),s=()=>{cs(c(),"ocular-data.json","application/json")};return(o,n)=>(h(),L($e,{text:i(a)("navigation.tools.export.export"),icon:i(Zt),onClick:s},null,8,["text","icon"]))}}),eo=P({__name:"Screen",props:{class:{},title:{},back:{type:Function}},setup(f){const c=f,a=V(()=>c.class);return(s,o)=>(h(),A("div",{class:g(s.$style.screen)},[s.title?(h(),A("h1",{key:0,class:g(s.$style.title)},[s.back?(h(),L(ce,{key:0,icon:i(Jt),textual:"",onClick:s.back},null,8,["icon","onClick"])):z("",!0),Y("span",null,ue(s.title),1)],2)):z("",!0),Y("div",{class:g(a.value)},[Te(s.$slots,"default")],2)],2))}}),to="Xc",so="Yc",no={screen:to,title:so},oo={$style:no},yt=oe(eo,[["__cssModules",oo]]),ao=P({__name:"FilePicker",props:Ne({class:{},placeholder:{},accept:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const c=qe(f,"modelValue"),a=f,s=dt(),o=V(()=>[a.class,s.filePicker,{[s.empty]:!c.value}]),n=()=>{ms({accept:a.accept?.join(","),multiple:!1}).then(l=>{c.value=l})};return(l,d)=>(h(),A("button",{type:"button",class:g(o.value),onClick:n},[Y("span",{class:g(l.$style.label)},ue(c.value?.name??l.placeholder),3)],2))}}),io="Zc",ro="_e",lo="-e",uo="ae",co={filePicker:io,icon:ro,label:lo,empty:uo},po={$style:co},Ge=oe(ao,[["__cssModules",po]]),fo=P({__name:"BudgetFileScreen",props:{back:{type:Function}},emits:["loaded"],setup(f,{emit:c}){const a=c,{deserialize:s}=Se(),o=F(),{t:n}=K(),l=async()=>{o.value&&(await s(o.value),a("loaded"))};return(d,p)=>(h(),L(yt,{back:d.back,class:g(d.$style.screen),title:i(n)("navigation.tools.import.what.ocular")},{default:J(()=>[b(Ge,{modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=r=>o.value=r),class:g(d.$style.input),placeholder:i(n)("navigation.tools.import.ocular.pickFile"),accept:[".json"]},null,8,["modelValue","class","placeholder"]),o.value?(h(),L(ce,{key:0,icon:i(Xe),text:i(n)("navigation.tools.import.ocular.import"),onClick:l},null,8,["icon","text"])):z("",!0)]),_:1},8,["back","class","title"]))}}),ho="Mc",mo="Nc",go={screen:ho,input:mo},vo={$style:go},yo=oe(fo,[["__cssModules",vo]]);var ze={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var _o=ze.exports,it;function bo(){return it||(it=1,function(f,c){((a,s)=>{f.exports=s()})(_o,function a(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},o,n=!s.document&&!!s.postMessage,l=s.IS_PAPA_WORKER||!1,d={},p=0,r={};function m(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var u=Le(t);u.chunkSize=parseInt(u.chunkSize),t.step||t.chunk||(u.chunkSize=null),this._handle=new W(u),(this._handle.streamer=this)._config=u}.call(this,e),this.parseChunk=function(t,u){var y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<y){let E=this._config.newline;E||(v=this._config.quoteChar||'"',E=this._handle.guessLineEndings(t,v)),t=[...t.split(E).slice(y)].join(E)}this.isFirstChunk&&q(this._config.beforeFirstChunk)&&(v=this._config.beforeFirstChunk(t))!==void 0&&(t=v),this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+t,v=(this._partialLine="",this._handle.parse(y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=v.meta.cursor,y=(this._finished||(this._partialLine=y.substring(t-this._baseIndex),this._baseIndex=t),v&&v.data&&(this._rowCount+=v.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)s.postMessage({results:v,workerId:r.WORKER_ID,finished:y});else if(q(this._config.chunk)&&!u){if(this._config.chunk(v,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=v=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(v.data),this._completeResults.errors=this._completeResults.errors.concat(v.errors),this._completeResults.meta=v.meta),this._completed||!y||!q(this._config.complete)||v&&v.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),y||v&&v.meta.paused||this._nextChunk(),v}this._halted=!0},this._sendError=function(t){q(this._config.error)?this._config.error(t):l&&this._config.error&&s.postMessage({workerId:r.WORKER_ID,error:t,finished:!1})}}function _(e){var t;(e=e||{}).chunkSize||(e.chunkSize=r.RemoteChunkSize),m.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=Ee(this._chunkLoaded,this),t.onerror=Ee(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var u,y=this._config.downloadRequestHeaders;for(u in y)t.setRequestHeader(u,y[u])}var v;this._config.chunkSize&&(v=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+v));try{t.send(this._config.downloadRequestBody)}catch(E){this._chunkError(E.message)}n&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(u=>(u=u.getResponseHeader("Content-Range"))!==null?parseInt(u.substring(u.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(u){u=t.statusText||u,this._sendError(new Error(u))}}function R(e){(e=e||{}).chunkSize||(e.chunkSize=r.LocalChunkSize),m.call(this,e);var t,u,y=typeof FileReader<"u";this.stream=function(v){this._input=v,u=v.slice||v.webkitSlice||v.mozSlice,y?((t=new FileReader).onload=Ee(this._chunkLoaded,this),t.onerror=Ee(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var v=this._input,E=(this._config.chunkSize&&(E=Math.min(this._start+this._config.chunkSize,this._input.size),v=u.call(v,this._start,E)),t.readAsText(v,this._config.encoding));y||this._chunkLoaded({target:{result:E}})},this._chunkLoaded=function(v){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(v.target.result)},this._chunkError=function(){this._sendError(t.error)}}function M(e){var t;m.call(this,e=e||{}),this.stream=function(u){return t=u,this._nextChunk()},this._nextChunk=function(){var u,y;if(!this._finished)return u=this._config.chunkSize,t=u?(y=t.substring(0,u),t.substring(u)):(y=t,""),this._finished=!t,this.parseChunk(y)}}function N(e){m.call(this,e=e||{});var t=[],u=!0,y=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(v){this._input=v,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){y&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):u=!0},this._streamData=Ee(function(v){try{t.push(typeof v=="string"?v:v.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(E){this._streamError(E)}},this),this._streamError=Ee(function(v){this._streamCleanUp(),this._sendError(v)},this),this._streamEnd=Ee(function(){this._streamCleanUp(),y=!0,this._streamData("")},this),this._streamCleanUp=Ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function W(e){var t,u,y,v,E=Math.pow(2,53),te=-E,he=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,me=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,x=this,G=0,$=0,re=!1,C=!1,D=[],k={data:[],errors:[],meta:{}};function se(I){return e.skipEmptyLines==="greedy"?I.join("").trim()==="":I.length===1&&I[0].length===0}function X(){if(k&&y&&(ge("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'"),y=!1),e.skipEmptyLines&&(k.data=k.data.filter(function(w){return!se(w)})),ie()){let w=function(Z,ne){q(e.transformHeader)&&(Z=e.transformHeader(Z,ne)),D.push(Z)};if(k)if(Array.isArray(k.data[0])){for(var I=0;ie()&&I<k.data.length;I++)k.data[I].forEach(w);k.data.splice(0,1)}else k.data.forEach(w)}function B(w,Z){for(var ne=e.header?{}:[],T=0;T<w.length;T++){var j=T,O=w[T],O=((ve,S)=>(H=>(e.dynamicTypingFunction&&e.dynamicTyping[H]===void 0&&(e.dynamicTyping[H]=e.dynamicTypingFunction(H)),(e.dynamicTyping[H]||e.dynamicTyping)===!0))(ve)?S==="true"||S==="TRUE"||S!=="false"&&S!=="FALSE"&&((H=>{if(he.test(H)&&(H=parseFloat(H),te<H&&H<E))return 1})(S)?parseFloat(S):me.test(S)?new Date(S):S===""?null:S):S)(j=e.header?T>=D.length?"__parsed_extra":D[T]:j,O=e.transform?e.transform(O,j):O);j==="__parsed_extra"?(ne[j]=ne[j]||[],ne[j].push(O)):ne[j]=O}return e.header&&(T>D.length?ge("FieldMismatch","TooManyFields","Too many fields: expected "+D.length+" fields but parsed "+T,$+Z):T<D.length&&ge("FieldMismatch","TooFewFields","Too few fields: expected "+D.length+" fields but parsed "+T,$+Z)),ne}var Q;k&&(e.header||e.dynamicTyping||e.transform)&&(Q=1,!k.data.length||Array.isArray(k.data[0])?(k.data=k.data.map(B),Q=k.data.length):k.data=B(k.data,0),e.header&&k.meta&&(k.meta.fields=D),$+=Q)}function ie(){return e.header&&D.length===0}function ge(I,B,Q,w){I={type:I,code:B,message:Q},w!==void 0&&(I.row=w),k.errors.push(I)}q(e.step)&&(v=e.step,e.step=function(I){k=I,ie()?X():(X(),k.data.length!==0&&(G+=I.data.length,e.preview&&G>e.preview?u.abort():(k.data=k.data[0],v(k,x))))}),this.parse=function(I,B,Q){var w=e.quoteChar||'"',w=(e.newline||(e.newline=this.guessLineEndings(I,w)),y=!1,e.delimiter?q(e.delimiter)&&(e.delimiter=e.delimiter(I),k.meta.delimiter=e.delimiter):((w=((Z,ne,T,j,O)=>{var ve,S,H,xe;O=O||[",","	","|",";",r.RECORD_SEP,r.UNIT_SEP];for(var Me=0;Me<O.length;Me++){for(var ye,Pe=O[Me],le=0,_e=0,ae=0,de=(H=void 0,new ee({comments:j,delimiter:Pe,newline:ne,preview:10}).parse(Z)),we=0;we<de.data.length;we++)T&&se(de.data[we])?ae++:(ye=de.data[we].length,_e+=ye,H===void 0?H=ye:0<ye&&(le+=Math.abs(ye-H),H=ye));0<de.data.length&&(_e/=de.data.length-ae),(S===void 0||le<=S)&&(xe===void 0||xe<_e)&&1.99<_e&&(S=le,ve=Pe,xe=_e)}return{successful:!!(e.delimiter=ve),bestDelimiter:ve}})(I,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=w.bestDelimiter:(y=!0,e.delimiter=r.DefaultDelimiter),k.meta.delimiter=e.delimiter),Le(e));return e.preview&&e.header&&w.preview++,t=I,u=new ee(w),k=u.parse(t,B,Q),X(),re?{meta:{paused:!0}}:k||{meta:{paused:!1}}},this.paused=function(){return re},this.pause=function(){re=!0,u.abort(),t=q(e.chunk)?"":t.substring(u.getCharIndex())},this.resume=function(){x.streamer._halted?(re=!1,x.streamer.parseChunk(t,!0)):setTimeout(x.resume,3)},this.aborted=function(){return C},this.abort=function(){C=!0,u.abort(),k.meta.aborted=!0,q(e.complete)&&e.complete(k),t=""},this.guessLineEndings=function(Z,w){Z=Z.substring(0,1048576);var w=new RegExp(fe(w)+"([^]*?)"+fe(w),"gm"),Q=(Z=Z.replace(w,"")).split("\r"),w=Z.split(`
`),Z=1<w.length&&w[0].length<Q[0].length;if(Q.length===1||Z)return`
`;for(var ne=0,T=0;T<Q.length;T++)Q[T][0]===`
`&&ne++;return ne>=Q.length/2?`\r
`:"\r"}}function fe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(e){var t=(e=e||{}).delimiter,u=e.newline,y=e.comments,v=e.step,E=e.preview,te=e.fastMode,he=null,me=!1,x=e.quoteChar==null?'"':e.quoteChar,G=x;if(e.escapeChar!==void 0&&(G=e.escapeChar),(typeof t!="string"||-1<r.BAD_DELIMITERS.indexOf(t))&&(t=","),y===t)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<r.BAD_DELIMITERS.indexOf(y))&&(y=!1),u!==`
`&&u!=="\r"&&u!==`\r
`&&(u=`
`);var $=0,re=!1;this.parse=function(C,D,k){if(typeof C!="string")throw new Error("Input must be a string");var se=C.length,X=t.length,ie=u.length,ge=y.length,I=q(v),B=[],Q=[],w=[],Z=$=0;if(!C)return le();if(te||te!==!1&&C.indexOf(x)===-1){for(var ne=C.split(u),T=0;T<ne.length;T++){if(w=ne[T],$+=w.length,T!==ne.length-1)$+=u.length;else if(k)return le();if(!y||w.substring(0,ge)!==y){if(I){if(B=[],xe(w.split(t)),_e(),re)return le()}else xe(w.split(t));if(E&&E<=T)return B=B.slice(0,E),le(!0)}}return le()}for(var j=C.indexOf(t,$),O=C.indexOf(u,$),ve=new RegExp(fe(G)+fe(x),"g"),S=C.indexOf(x,$);;)if(C[$]===x)for(S=$,$++;;){if((S=C.indexOf(x,S+1))===-1)return k||Q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:B.length,index:$}),ye();if(S===se-1)return ye(C.substring($,S).replace(ve,x));if(x===G&&C[S+1]===G)S++;else if(x===G||S===0||C[S-1]!==G){j!==-1&&j<S+1&&(j=C.indexOf(t,S+1));var H=Me((O=O!==-1&&O<S+1?C.indexOf(u,S+1):O)===-1?j:Math.min(j,O));if(C.substr(S+1+H,X)===t){w.push(C.substring($,S).replace(ve,x)),C[$=S+1+H+X]!==x&&(S=C.indexOf(x,$)),j=C.indexOf(t,$),O=C.indexOf(u,$);break}if(H=Me(O),C.substring(S+1+H,S+1+H+ie)===u){if(w.push(C.substring($,S).replace(ve,x)),Pe(S+1+H+ie),j=C.indexOf(t,$),S=C.indexOf(x,$),I&&(_e(),re))return le();if(E&&B.length>=E)return le(!0);break}Q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:B.length,index:$}),S++}}else if(y&&w.length===0&&C.substring($,$+ge)===y){if(O===-1)return le();$=O+ie,O=C.indexOf(u,$),j=C.indexOf(t,$)}else if(j!==-1&&(j<O||O===-1))w.push(C.substring($,j)),$=j+X,j=C.indexOf(t,$);else{if(O===-1)break;if(w.push(C.substring($,O)),Pe(O+ie),I&&(_e(),re))return le();if(E&&B.length>=E)return le(!0)}return ye();function xe(ae){B.push(ae),Z=$}function Me(ae){var de=0;return de=ae!==-1&&(ae=C.substring(S+1,ae))&&ae.trim()===""?ae.length:de}function ye(ae){return k||(ae===void 0&&(ae=C.substring($)),w.push(ae),$=se,xe(w),I&&_e()),le()}function Pe(ae){$=ae,xe(w),w=[],O=C.indexOf(u,$)}function le(ae){if(e.header&&!D&&B.length&&!me){var de=B[0],we={},Ke=new Set(de);let tt=!1;for(let De=0;De<de.length;De++){let be=de[De];if(we[be=q(e.transformHeader)?e.transformHeader(be,De):be]){let Be,st=we[be];for(;Be=be+"_"+st,st++,Ke.has(Be););Ke.add(Be),de[De]=Be,we[be]++,tt=!0,(he=he===null?{}:he)[Be]=be}else we[be]=1,de[De]=be;Ke.add(be)}tt&&console.warn("Duplicate headers found and renamed."),me=!0}return{data:B,errors:Q,meta:{delimiter:t,linebreak:u,aborted:re,truncated:!!ae,cursor:Z+(D||0),renamedHeaders:he}}}function _e(){v(le()),B=[],Q=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return $}}function U(e){var t=e.data,u=d[t.workerId],y=!1;if(t.error)u.userError(t.error,t.file);else if(t.results&&t.results.data){var v={abort:function(){y=!0,pe(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Re,resume:Re};if(q(u.userStep)){for(var E=0;E<t.results.data.length&&(u.userStep({data:t.results.data[E],errors:t.results.errors,meta:t.results.meta},v),!y);E++);delete t.results}else q(u.userChunk)&&(u.userChunk(t.results,v,t.file),delete t.results)}t.finished&&!y&&pe(t.workerId,t.results)}function pe(e,t){var u=d[e];q(u.userComplete)&&u.userComplete(t),u.terminate(),delete d[e]}function Re(){throw new Error("Not implemented.")}function Le(e){if(typeof e!="object"||e===null)return e;var t,u=Array.isArray(e)?[]:{};for(t in e)u[t]=Le(e[t]);return u}function Ee(e,t){return function(){e.apply(t,arguments)}}function q(e){return typeof e=="function"}return r.parse=function(e,t){var u=(t=t||{}).dynamicTyping||!1;if(q(u)&&(t.dynamicTypingFunction=u,u={}),t.dynamicTyping=u,t.transform=!!q(t.transform)&&t.transform,!t.worker||!r.WORKERS_SUPPORTED)return u=null,r.NODE_STREAM_INPUT,typeof e=="string"?(e=(y=>y.charCodeAt(0)!==65279?y:y.slice(1))(e),u=new(t.download?_:M)(t)):e.readable===!0&&q(e.read)&&q(e.on)?u=new N(t):(s.File&&e instanceof File||e instanceof Object)&&(u=new R(t)),u.stream(e);(u=(()=>{var y;return!!r.WORKERS_SUPPORTED&&(y=(()=>{var v=s.URL||s.webkitURL||null,E=a.toString();return r.BLOB_URL||(r.BLOB_URL=v.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",E,")();"],{type:"text/javascript"})))})(),(y=new s.Worker(y)).onmessage=U,y.id=p++,d[y.id]=y)})()).userStep=t.step,u.userChunk=t.chunk,u.userComplete=t.complete,u.userError=t.error,t.step=q(t.step),t.chunk=q(t.chunk),t.complete=q(t.complete),t.error=q(t.error),delete t.worker,u.postMessage({input:e,config:t,workerId:u.id})},r.unparse=function(e,t){var u=!1,y=!0,v=",",E=`\r
`,te='"',he=te+te,me=!1,x=null,G=!1,$=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||r.BAD_DELIMITERS.filter(function(D){return t.delimiter.indexOf(D)!==-1}).length||(v=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(u=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(me=t.skipEmptyLines),typeof t.newline=="string"&&(E=t.newline),typeof t.quoteChar=="string"&&(te=t.quoteChar),typeof t.header=="boolean"&&(y=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");x=t.columns}t.escapeChar!==void 0&&(he=t.escapeChar+te),t.escapeFormulae instanceof RegExp?G=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(G=/^[=+\-@\t\r].*$/)}})(),new RegExp(fe(te),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return re(null,e,me);if(typeof e[0]=="object")return re(x||Object.keys(e[0]),e,me)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||x),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),re(e.fields||[],e.data||[],me);throw new Error("Unable to serialize unrecognized input");function re(D,k,se){var X="",ie=(typeof D=="string"&&(D=JSON.parse(D)),typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(D)&&0<D.length),ge=!Array.isArray(k[0]);if(ie&&y){for(var I=0;I<D.length;I++)0<I&&(X+=v),X+=C(D[I],I);0<k.length&&(X+=E)}for(var B=0;B<k.length;B++){var Q=(ie?D:k[B]).length,w=!1,Z=ie?Object.keys(k[B]).length===0:k[B].length===0;if(se&&!ie&&(w=se==="greedy"?k[B].join("").trim()==="":k[B].length===1&&k[B][0].length===0),se==="greedy"&&ie){for(var ne=[],T=0;T<Q;T++){var j=ge?D[T]:T;ne.push(k[B][j])}w=ne.join("").trim()===""}if(!w){for(var O=0;O<Q;O++){0<O&&!Z&&(X+=v);var ve=ie&&ge?D[O]:O;X+=C(k[B][ve],O)}B<k.length-1&&(!se||0<Q&&!Z)&&(X+=E)}}return X}function C(D,k){var se,X;return D==null?"":D.constructor===Date?JSON.stringify(D).slice(1,25):(X=!1,G&&typeof D=="string"&&G.test(D)&&(D="'"+D,X=!0),se=D.toString().replace($,he),(X=X||u===!0||typeof u=="function"&&u(D,k)||Array.isArray(u)&&u[k]||((ie,ge)=>{for(var I=0;I<ge.length;I++)if(-1<ie.indexOf(ge[I]))return!0;return!1})(se,r.BAD_DELIMITERS)||-1<se.indexOf(v)||se.charAt(0)===" "||se.charAt(se.length-1)===" ")?te+se+te:se)}},r.RECORD_SEP="",r.UNIT_SEP="",r.BYTE_ORDER_MARK="\uFEFF",r.BAD_DELIMITERS=["\r",`
`,'"',r.BYTE_ORDER_MARK],r.WORKERS_SUPPORTED=!n&&!!s.Worker,r.NODE_STREAM_INPUT=1,r.LocalChunkSize=10485760,r.RemoteChunkSize=5242880,r.DefaultDelimiter=",",r.Parser=ee,r.ParserHandle=W,r.NetworkStreamer=_,r.FileStreamer=R,r.StringStreamer=M,r.ReadableStreamStreamer=N,s.jQuery&&((o=s.jQuery).fn.parse=function(e){var t=e.config||{},u=[];return this.each(function(E){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var te=0;te<this.files.length;te++)u.push({file:this.files[te],inputElem:this,instanceConfig:o.extend({},t)})}),y(),this;function y(){if(u.length===0)q(e.complete)&&e.complete();else{var E,te,he,me,x=u[0];if(q(e.before)){var G=e.before(x.file,x.inputElem);if(typeof G=="object"){if(G.action==="abort")return E="AbortError",te=x.file,he=x.inputElem,me=G.reason,void(q(e.error)&&e.error({name:E},te,he,me));if(G.action==="skip")return void v();typeof G.config=="object"&&(x.instanceConfig=o.extend(x.instanceConfig,G.config))}else if(G==="skip")return void v()}var $=x.instanceConfig.complete;x.instanceConfig.complete=function(re){q($)&&$(re,x.file,x.inputElem),v()},r.parse(x.file,x.instanceConfig)}}function v(){u.splice(0,1),y()}}),l&&(s.onmessage=function(e){e=e.data,r.WORKER_ID===void 0&&e&&(r.WORKER_ID=e.workerId),typeof e.input=="string"?s.postMessage({workerId:r.WORKER_ID,results:r.parse(e.input,e.config),finished:!0}):(s.File&&e.input instanceof File||e.input instanceof Object)&&(e=r.parse(e.input,e.config))&&s.postMessage({workerId:r.WORKER_ID,results:e,finished:!0})}),(_.prototype=Object.create(m.prototype)).constructor=_,(R.prototype=Object.create(m.prototype)).constructor=R,(M.prototype=Object.create(M.prototype)).constructor=M,(N.prototype=Object.create(m.prototype)).constructor=N,r})}(ze)),ze.exports}var ko=bo();const rt=f=>{const c=[],a=ko.parse(f,{skipEmptyLines:"greedy"}).data;a.shift();let s;for(let o=0;o<a.length;o++){const[n,,l,...d]=a[o];if(n)s={budgets:[],id:Ve(),name:n.trim()},c.push(s);else if(l&&s){const p=d.map(r=>r.replace(/\D/g,"")).map(Number).slice(0,12);s.budgets.push({id:Ve(),name:l.trim(),values:p})}}return c},$o=P({__name:"GoogleAnnualBudgetScreen",props:{back:{type:Function}},emits:["loaded"],setup(f,{emit:c}){const a=c,{setBudgetGroups:s}=Se(),o=F(),n=F(),{t:l}=K(),d=async()=>{if(o.value&&n.value){const p=rt(await nt(o.value)),r=rt(await nt(n.value));s("expenses",p),s("income",r),a("loaded")}};return(p,r)=>(h(),L(yt,{back:p.back,class:g(p.$style.screen),title:i(l)("navigation.tools.import.google.import")},{default:J(()=>[b(Ge,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=m=>n.value=m),class:g(p.$style.input),placeholder:i(l)("navigation.tools.import.google.income"),accept:[".csv"]},null,8,["modelValue","class","placeholder"]),b(Ge,{modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=m=>o.value=m),class:g(p.$style.input),placeholder:i(l)("navigation.tools.import.google.expenses"),accept:[".csv"]},null,8,["modelValue","class","placeholder"]),o.value&&n.value?(h(),L(ce,{key:0,icon:i(Xe),text:i(l)("navigation.tools.import.google.import"),onClick:d},null,8,["icon","text"])):z("",!0)]),_:1},8,["back","class","title"]))}}),wo="Oc",Co="Pc",So={screen:wo,input:Co},Eo={$style:So},xo=oe($o,[["__cssModules",Eo]]),_t=Symbol("OnboardingStore"),Ro=P({__name:"Step",props:{class:{}},setup(f){const c=f,a=F(),s=hs(a),{register:o,unregister:n}=Et(_t);Ze(()=>o(s)),xt(()=>n(s));const l=V(()=>c.class);return(d,p)=>(h(),A("div",{ref_key:"root",ref:a,class:g([d.$style.step,l.value])},[Te(d.$slots,"default")],2))}}),Mo="Qc",Do="Rc",Io={step:Mo,shadow:Do},Oo={$style:Io},lt=oe(Ro,[["__cssModules",Oo]]),Lo=P({__name:"Steps",props:{class:{}},emits:["finish"],setup(f,{expose:c,emit:a}){Qe(N=>({"1fe22460":r.value.width,"7ad92466":r.value.height,"822e57a2":m.value}));const s=a,o=f,n=F(),l=ft([]),d=V(()=>o.class),p=F(0),r=V(()=>l[p.value]?.value??new DOMRect),m=V(()=>l.slice(0,p.value).reduce((N,W)=>N+W.value.width,0));Rt(_t,{register:N=>l.push(N),unregister:N=>Mt(l,N)});const _=()=>p.value=0,R=()=>p.value=Math.max(0,p.value-1),M=()=>{p.value+1<l.length?p.value++:s("finish")};return c({reset:_,previous:R,next:M}),(N,W)=>(h(),A("div",{ref_key:"root",ref:n,class:g([N.$style.steps,d.value])},[Te(N.$slots,"default",{next:M,previous:R,reset:_})],2))}}),Po="Sc",Bo={steps:Po},Ao={$style:Bo},Vo=oe(Lo,[["__cssModules",Ao]]),Fo=P({__name:"ImportButton",setup(f){const c=ot(),a=ot(),s=F(!1),{t:o}=K(),n=()=>{s.value=!1},l=d=>{c.value=d,a.value?.next()};return Ue(s,()=>a.value?.reset()),(d,p)=>(h(),A(Ce,null,[b($e,{text:i(o)("navigation.tools.import.import"),icon:i(Xe),onClick:p[0]||(p[0]=r=>s.value=!0)},null,8,["text","icon"]),b(Oe,{ref:"dialog",open:s.value,onClose:p[3]||(p[3]=r=>s.value=!1)},{default:J(()=>[b(Vo,{ref_key:"steps",ref:a,onFinish:n},{default:J(({previous:r})=>[b(lt,{class:g(d.$style.step)},{default:J(()=>[Y("h1",{class:g(d.$style.title)},ue(i(o)("navigation.tools.import.what.title")),3),b(ce,{icon:i(Xt),text:i(o)("navigation.tools.import.what.ocular"),onClick:p[1]||(p[1]=m=>l(yo))},null,8,["icon","text"]),b(ce,{icon:i(es),text:i(o)("navigation.tools.import.what.google"),onClick:p[2]||(p[2]=m=>l(xo))},null,8,["icon","text"])]),_:1},8,["class"]),b(lt,null,{default:J(()=>[c.value?(h(),L(ut(c.value),{key:0,back:r,onLoaded:n},null,40,["back"])):z("",!0)]),_:2},1024)]),_:1},512)]),_:1},8,["open"])],64))}}),Uo="V_",To="W_",zo={step:Uo,title:To},No={$style:zo},qo=oe(Fo,[["__cssModules",No]]),jo=P({__name:"LoadDemoDataButton",setup(f){const c=Dt(),{deserialize:a}=Se(),{status:s}=ke(),{t:o}=K(),n=F(!1),l=async()=>{if(n.value||s.value!=="idle")return;await c.push("/"),n.value=!0;const{default:d}=await It(async()=>{const{default:r}=await import("./DemoData-SSJnrwA3.js");return{default:r}},[]),p=new Date().getFullYear();for(let r=0;r<d.years.length;r++)d.years[r].year=p-1+r;await a(d),n.value=!1};return Ze(()=>{location.hash==="#demo"&&l()}),(d,p)=>(h(),L($e,{testId:"load-demo-data",text:i(o)("navigation.tools.demo.loadDemoData"),icon:i(ts),onClick:l},null,8,["text","icon"]))}}),Yo=P({__name:"PrivacyModeButton",setup(f){const{setMode:c,state:a}=Je(),{t:s}=K(),o=V(()=>a.appearance.mode==="privacy"),n=()=>c(o.value?"normal":"privacy");return(l,d)=>(h(),L($e,{text:o.value?i(s)("navigation.tools.privacyMode.disable"):i(s)("navigation.tools.privacyMode.enable"),icon:o.value?i(gt):i(mt),onClick:n},null,8,["text","icon"]))}}),Ko=P({__name:"ToolsButton",props:{class:{}},setup(f){const c=f,{status:a,user:s}=ke(),{t:o}=K(),n=je(),l=V(()=>c.class);return(d,p)=>(h(),L(Ye,{tooltip:i(o)("navigation.tools.tools"),position:i(n)==="mobile"?"top":"right-end",tooltipPosition:"right"},{default:J(({toggle:r})=>[b(ce,{testId:"tools-menu",class:g(l.value),icon:i(ss),textual:"",color:"dimmed",onClick:r},null,8,["class","icon","onClick"])]),options:J(()=>[i(a)==="idle"?(h(),L(jo,{key:0})):z("",!0),i(s)?(h(),L(Gn,{key:1})):z("",!0),b(Yo),b(Xn),b(qo),b(Qn),b(Zn),b(Jn)]),_:1},8,["tooltip","position"]))}}),Ho=1,Wo=P({__name:"ChangeYearButton",props:{class:{}},setup(f){const c=f,{t:a}=K(),{changeYear:s,state:o}=Se(),n=je(),l=Ot(),d=V(()=>c.class),p=V(()=>{const r=o.years.map(R=>R.year),m=Math.min(...r),_=[];for(let R=m-1;R<=l.year.value+Ho;R++)_.push({id:R,muted:R===m-1,icon:o.activeYear===R?ns:os});return _});return(r,m)=>(h(),L(Ye,{tooltip:i(a)("navigation.year.change"),tooltipPosition:"right",position:i(n)==="mobile"?"top":"right-end",options:p.value,testId:"change-year",highlight:i(o).activeYear,onSelect:m[0]||(m[0]=_=>i(s)(_.id))},{default:J(({toggle:_})=>[b(ce,{testId:"change-year",class:g(d.value),icon:i(as),textual:"",color:"dimmed",onClick:_},null,8,["class","icon","onClick"])]),_:1},8,["tooltip","position","options","highlight"]))}}),Go=P({__name:"StatusBar",props:{class:{}},setup(f){const c=f,{t:a}=K(),{status:s,retry:o}=ke(),n=V(()=>c.class),l=V(()=>{switch(s.value){case"error":return{title:a("navigation.status.synchronizationFailedDueToNetworkError"),button:a("navigation.status.retrySynchronization"),action:o};case"retrying":return{title:a("navigation.status.retryingPleaseWait")}}});return(d,p)=>l.value?(h(),A("div",{key:0,class:g([d.$style.statusBar,n.value])},[Y("h1",{class:g(d.$style.title)},ue(l.value.title),3),l.value.button&&l.value.action?(h(),A("button",{key:0,type:"button",class:g(d.$style.button),onClick:p[0]||(p[0]=(...r)=>l.value.action&&l.value.action(...r))},ue(l.value.button),3)):z("",!0)],2)):z("",!0)}}),Qo="C",Zo="D",Jo="E",Xo={statusBar:Qo,button:Zo,title:Jo},ea={$style:Xo},ta=oe(Go,[["__cssModules",ea]]),sa={key:1,style:{"flex-grow":"1"}},na=P({__name:"Frame",setup(f){const c=F(),a=je(),{user:s}=ke(),{t:o}=K(),n=V(()=>[{icon:is,name:"dashboard",tooltip:o("page.dashboard.title")},{icon:rs,name:"income",tooltip:o("page.income.title")},{icon:ls,name:"expenses",tooltip:o("page.expenses.title")}]);return(l,d)=>{const p=Lt("RouterView");return h(),A("div",{class:g(l.$style.frame)},[Y("div",{ref_key:"menu",ref:c,class:g(l.$style.buttons)},[i(a)!=="mobile"?(h(),A(Ce,{key:0},[b(zn,{class:g(l.$style.btn)},null,8,["class"]),Y("div",{class:g(l.$style.divider)},null,2)],64)):z("",!0),(h(!0),A(Ce,null,ht(n.value,r=>(h(),L(ds,{key:r.name,tooltip:r.tooltip,tooltipPosition:"right",testId:"navigation",class:g(l.$style.btn),color:m=>m?"primary":"dimmed",icon:r.icon,name:r.name},null,8,["tooltip","class","color","icon","name"]))),128)),i(a)!=="mobile"?(h(),A("div",sa)):z("",!0),b(Ko,{class:g(l.$style.btn)},null,8,["class"]),i(s)?.admin?(h(),L(wn,{key:2,class:g(l.$style.btn)},null,8,["class"])):z("",!0),b(Wo,{class:g(l.$style.btn)},null,8,["class"]),i(a)!=="mobile"?(h(),L(Tn,{key:3,class:g(l.$style.btn)},null,8,["class"])):z("",!0),Y("div",{class:g(l.$style.divider)},null,2),b(Sn,{class:g(l.$style.btn)},null,8,["class"])],2),Y("div",{ref:"panes",class:g(l.$style.panes)},[b(ta),b(p,null,{default:J(({Component:r})=>[r?(h(),L(ps,{key:0,is:r},null,8,["is"])):z("",!0)]),_:1})],2)],2)}}}),oa="v",aa="w",ia="x",ra="y",la="z",ua="A",ca="B",da={frame:oa,panes:aa,buttons:ia,top:ra,divider:la,mobileDivider:ua,btn:ca},pa={$style:da},va=oe(na,[["__cssModules",pa]]);export{va as default};
